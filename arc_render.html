<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ARC-AGI Problem Renderer</title>
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                margin: 20px;
                background: #f5f5f5;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            .problem-input {
                width: 100%;
                height: 200px;
                margin-bottom: 20px;
                padding: 15px;
                border: 2px solid #ddd;
                border-radius: 8px;
                font-family: monospace;
                resize: vertical;
            }
            .render-btn {
                background: #4caf50;
                color: white;
                padding: 12px 24px;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 16px;
                margin-bottom: 20px;
            }
            .render-btn:hover {
                background: #45a049;
            }
            .problem-container {
                margin-top: 20px;
            }
            .section {
                margin-bottom: 30px;
            }
            .section-title {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 15px;
                color: #333;
            }
            .example {
                display: flex;
                gap: 20px;
                margin-bottom: 20px;
                padding: 15px;
                background: #f9f9f9;
                border-radius: 8px;
            }
            .grid-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .grid-label {
                font-weight: bold;
                margin-bottom: 8px;
                color: #555;
            }
            .grid {
                display: inline-grid;
                gap: 1px;
                padding: 2px;
                background: #333;
                border-radius: 4px;
            }
            .cell {
                width: 25px;
                height: 25px;
                border: 1px solid #333;
            }
            .color-legend {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                margin-top: 20px;
                padding: 15px;
                background: #f0f0f0;
                border-radius: 8px;
            }
            .color-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }
            .color-sample {
                width: 20px;
                height: 20px;
                border: 1px solid #333;
                border-radius: 3px;
            }
            .example-number {
                position: absolute;
                top: -5px;
                left: -5px;
                background: #007bff;
                color: white;
                border-radius: 50%;
                width: 25px;
                height: 25px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                font-size: 12px;
            }
            .example {
                position: relative;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>ARC-AGI Problem Renderer</h1>
            <p>
                Paste your ARC problem JSON data below and click "Render
                Problem" to visualize it:
            </p>

            <textarea
                class="problem-input"
                id="problemInput"
                placeholder='Paste ARC JSON here, e.g.:
{
  "train": [
    {
      "input": [[0,0,0],[0,1,0],[0,0,0]],
      "output": [[1,1,1],[1,0,1],[1,1,1]]
    }
  ],
  "test": [
    {
      "input": [[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]
    }
  ]
}'
            ></textarea>

            <button class="render-btn" onclick="renderProblem()">
                Render Problem
            </button>

            <div id="problemContainer" class="problem-container"></div>

            <div class="color-legend">
                <strong>Color Legend:</strong>
                <div class="color-item">
                    <div class="color-sample" style="background: #000"></div>
                    0: Black
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #0074d9"></div>
                    1: Blue
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #ff4136"></div>
                    2: Red
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #2ecc40"></div>
                    3: Green
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #ffdc00"></div>
                    4: Yellow
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #aaaaaa"></div>
                    5: Gray
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #f012be"></div>
                    6: Magenta
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #ff851b"></div>
                    7: Orange
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #7fdbff"></div>
                    8: Sky
                </div>
                <div class="color-item">
                    <div class="color-sample" style="background: #870c25"></div>
                    9: Brown
                </div>
            </div>
        </div>

        <script>
            const colors = [
                '#000000', // 0: Black
                '#0074D9', // 1: Blue
                '#FF4136', // 2: Red
                '#2ECC40', // 3: Green
                '#FFDC00', // 4: Yellow
                '#AAAAAA', // 5: Gray
                '#F012BE', // 6: Magenta
                '#FF851B', // 7: Orange
                '#7FDBFF', // 8: Sky
                '#870C25', // 9: Brown
            ]

            function createGrid(gridData, label) {
                const container = document.createElement('div')
                container.className = 'grid-container'

                const labelDiv = document.createElement('div')
                labelDiv.className = 'grid-label'
                labelDiv.textContent = label
                container.appendChild(labelDiv)

                const grid = document.createElement('div')
                grid.className = 'grid'
                grid.style.gridTemplateColumns = `repeat(${gridData[0].length}, 1fr)`
                grid.style.gridTemplateRows = `repeat(${gridData.length}, 1fr)`

                for (let row of gridData) {
                    for (let cell of row) {
                        const cellDiv = document.createElement('div')
                        cellDiv.className = 'cell'
                        cellDiv.style.backgroundColor =
                            colors[cell] || '#000000'
                        cellDiv.title = `Value: ${cell}`
                        grid.appendChild(cellDiv)
                    }
                }

                container.appendChild(grid)
                return container
            }

            function renderProblem() {
                const input = document
                    .getElementById('problemInput')
                    .value.trim()
                const container = document.getElementById('problemContainer')

                if (!input) {
                    container.innerHTML =
                        '<p style="color: red;">Please paste JSON data first.</p>'
                    return
                }

                try {
                    const problem = JSON.parse(input)
                    container.innerHTML = ''

                    // Render training examples
                    if (problem.train && problem.train.length > 0) {
                        const trainSection = document.createElement('div')
                        trainSection.className = 'section'

                        const title = document.createElement('div')
                        title.className = 'section-title'
                        title.textContent = 'Training Examples'
                        trainSection.appendChild(title)

                        problem.train.forEach((example, index) => {
                            const exampleDiv = document.createElement('div')
                            exampleDiv.className = 'example'

                            const numberDiv = document.createElement('div')
                            numberDiv.className = 'example-number'
                            numberDiv.textContent = index + 1
                            exampleDiv.appendChild(numberDiv)

                            exampleDiv.appendChild(
                                createGrid(example.input, 'Input')
                            )
                            if (example.output) {
                                exampleDiv.appendChild(
                                    createGrid(example.output, 'Output')
                                )
                            }

                            trainSection.appendChild(exampleDiv)
                        })

                        container.appendChild(trainSection)
                    }

                    // Render test examples
                    if (problem.test && problem.test.length > 0) {
                        const testSection = document.createElement('div')
                        testSection.className = 'section'

                        const title = document.createElement('div')
                        title.className = 'section-title'
                        title.textContent = 'Test Examples'
                        testSection.appendChild(title)

                        problem.test.forEach((example, index) => {
                            const exampleDiv = document.createElement('div')
                            exampleDiv.className = 'example'

                            const numberDiv = document.createElement('div')
                            numberDiv.className = 'example-number'
                            numberDiv.textContent = index + 1
                            exampleDiv.appendChild(numberDiv)

                            exampleDiv.appendChild(
                                createGrid(example.input, 'Input')
                            )
                            if (example.output) {
                                exampleDiv.appendChild(
                                    createGrid(example.output, 'Output')
                                )
                            } else {
                                const placeholder =
                                    document.createElement('div')
                                placeholder.className = 'grid-container'
                                placeholder.innerHTML =
                                    '<div class="grid-label">Output</div><div style="padding: 20px; border: 2px dashed #ccc; border-radius: 8px; color: #666;">To be solved</div>'
                                exampleDiv.appendChild(placeholder)
                            }

                            testSection.appendChild(exampleDiv)
                        })

                        container.appendChild(testSection)
                    }
                } catch (error) {
                    container.innerHTML = `<p style="color: red;">Error parsing JSON: ${error.message}</p>`
                }
            }

            // Load a sample problem on page load
            window.onload = function () {
                const sampleProblem = {
                    train: [
                        {
                            input: [
                                [0, 0, 0],
                                [0, 1, 0],
                                [0, 0, 0],
                            ],
                            output: [
                                [1, 1, 1],
                                [1, 0, 1],
                                [1, 1, 1],
                            ],
                        },
                        {
                            input: [
                                [0, 0, 0, 0],
                                [0, 2, 0, 0],
                                [0, 0, 0, 0],
                                [0, 0, 0, 0],
                            ],
                            output: [
                                [2, 2, 2, 2],
                                [2, 0, 2, 2],
                                [2, 2, 2, 2],
                                [2, 2, 2, 2],
                            ],
                        },
                    ],
                    test: [
                        {
                            input: [
                                [0, 0, 0, 0, 0],
                                [0, 0, 3, 0, 0],
                                [0, 0, 0, 0, 0],
                                [0, 0, 0, 0, 0],
                                [0, 0, 0, 0, 0],
                            ],
                        },
                    ],
                }

                document.getElementById('problemInput').value = JSON.stringify(
                    sampleProblem,
                    null,
                    2
                )
                renderProblem()
            }
        </script>
    </body>
</html>
